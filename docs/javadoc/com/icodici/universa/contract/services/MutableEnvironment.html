<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_161) on Tue Jun 19 10:31:16 CEST 2018 -->
<title>MutableEnvironment (universa_core 1.0-SNAPSHOT API)</title>
<meta name="date" content="2018-06-19">
<link rel="stylesheet" type="text/css" href="../../../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="MutableEnvironment (universa_core 1.0-SNAPSHOT API)";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":6,"i1":6,"i2":6,"i3":6,"i4":6,"i5":6,"i6":6,"i7":6,"i8":6};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],4:["t3","Abstract Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../com/icodici/universa/contract/services/ImmutableEnvironment.html" title="interface in com.icodici.universa.contract.services"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../../com/icodici/universa/contract/services/NameRecord.html" title="interface in com.icodici.universa.contract.services"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../index.html?com/icodici/universa/contract/services/MutableEnvironment.html" target="_top">Frames</a></li>
<li><a href="MutableEnvironment.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">com.icodici.universa.contract.services</div>
<h2 title="Interface MutableEnvironment" class="title">Interface MutableEnvironment</h2>
</div>
<div class="contentContainer">
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Superinterfaces:</dt>
<dd><a href="../../../../../com/icodici/universa/contract/services/ImmutableEnvironment.html" title="interface in com.icodici.universa.contract.services">ImmutableEnvironment</a></dd>
</dl>
<dl>
<dt>All Known Implementing Classes:</dt>
<dd><a href="../../../../../com/icodici/universa/contract/services/NMutableEnvironment.html" title="class in com.icodici.universa.contract.services">NMutableEnvironment</a></dd>
</dl>
<hr>
<br>
<pre>public interface <span class="typeNameLabel">MutableEnvironment</span>
extends <a href="../../../../../com/icodici/universa/contract/services/ImmutableEnvironment.html" title="interface in com.icodici.universa.contract.services">ImmutableEnvironment</a></pre>
<div class="block">The RW envitonment for <a href="../../../../../com/icodici/universa/contract/services/NContract.html" title="interface in com.icodici.universa.contract.services"><code>NContract</code></a> instance, where it can change its server state.
 <p>
 It implemets KV store for the server-state. It is created automatically first time <a href="../../../../../com/icodici/universa/contract/services/MutableEnvironment.html#set-java.lang.String-T-"><code>set(String, Object)</code></a> is
 called and must commit any changes to the ledger when the new contract state is being approved. Before this the
 ledger state must not be altered.
 <p>
 The RC problem should be repelled by saving the state of the "approved" contract only. To do this. the nodes must
 extend voting by adding state's CRC2-384 hash to the voting ID and copy the state of the approved contract as need</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t3" class="tableTab"><span><a href="javascript:show(4);">Abstract Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>@NonNull <a href="../../../../../com/icodici/universa/contract/services/NameRecord.html" title="interface in com.icodici.universa.contract.services">NameRecord</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../com/icodici/universa/contract/services/MutableEnvironment.html#createNameRecord-com.icodici.universa.contract.services.UnsName-java.time.ZonedDateTime-">createNameRecord</a></span>(@NonNull <a href="../../../../../com/icodici/universa/contract/services/UnsName.html" title="class in com.icodici.universa.contract.services">UnsName</a>&nbsp;unsName,
                @NonNull java.time.ZonedDateTime&nbsp;expiresAt)</code>&nbsp;</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>@NonNull <a href="../../../../../com/icodici/universa/contract/services/ContractStorageSubscription.html" title="interface in com.icodici.universa.contract.services">ContractStorageSubscription</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../com/icodici/universa/contract/services/MutableEnvironment.html#createStorageSubscription-byte:A-java.time.ZonedDateTime-">createStorageSubscription</a></span>(byte[]&nbsp;packedTransaction,
                         @NonNull java.time.ZonedDateTime&nbsp;expiresAt)</code>
<div class="block">Create storage subscription to a packed contract.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>@Nullable <a href="../../../../../com/icodici/universa/contract/services/ContractStorageSubscription.html" title="interface in com.icodici.universa.contract.services">ContractStorageSubscription</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../com/icodici/universa/contract/services/MutableEnvironment.html#createStorageSubscription-com.icodici.universa.HashId-java.time.ZonedDateTime-">createStorageSubscription</a></span>(@NonNull <a href="../../../../../com/icodici/universa/HashId.html" title="class in com.icodici.universa">HashId</a>&nbsp;contractId,
                         @NonNull java.time.ZonedDateTime&nbsp;expiresAt)</code>
<div class="block">Create subscription to the existing (stored) contract</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../com/icodici/universa/contract/services/MutableEnvironment.html#destroyNameRecord-com.icodici.universa.contract.services.NameRecord-">destroyNameRecord</a></span>(<a href="../../../../../com/icodici/universa/contract/services/NameRecord.html" title="interface in com.icodici.universa.contract.services">NameRecord</a>&nbsp;nameRecord)</code>&nbsp;</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../com/icodici/universa/contract/services/MutableEnvironment.html#destroySubscription-com.icodici.universa.contract.services.ContractStorageSubscription-">destroySubscription</a></span>(<a href="../../../../../com/icodici/universa/contract/services/ContractStorageSubscription.html" title="interface in com.icodici.universa.contract.services">ContractStorageSubscription</a>&nbsp;subscription)</code>&nbsp;</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../com/icodici/universa/contract/services/MutableEnvironment.html#rollback--">rollback</a></span>()</code>
<div class="block">Reset the KV store to the initial state</div>
</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code>&lt;T&gt;&nbsp;T</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../com/icodici/universa/contract/services/MutableEnvironment.html#set-java.lang.String-T-">set</a></span>(java.lang.String&nbsp;key,
   T&nbsp;value)</code>
<div class="block">Writes a key to the KV store.</div>
</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../com/icodici/universa/contract/services/MutableEnvironment.html#setNameRecordExpiresAt-com.icodici.universa.contract.services.NameRecord-java.time.ZonedDateTime-">setNameRecordExpiresAt</a></span>(<a href="../../../../../com/icodici/universa/contract/services/NameRecord.html" title="interface in com.icodici.universa.contract.services">NameRecord</a>&nbsp;nameRecord,
                      java.time.ZonedDateTime&nbsp;expiresAt)</code>&nbsp;</td>
</tr>
<tr id="i8" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../com/icodici/universa/contract/services/MutableEnvironment.html#setSubscriptionExpiresAt-com.icodici.universa.contract.services.ContractStorageSubscription-java.time.ZonedDateTime-">setSubscriptionExpiresAt</a></span>(<a href="../../../../../com/icodici/universa/contract/services/ContractStorageSubscription.html" title="interface in com.icodici.universa.contract.services">ContractStorageSubscription</a>&nbsp;subscription,
                        java.time.ZonedDateTime&nbsp;expiresAt)</code>&nbsp;</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.com.icodici.universa.contract.services.ImmutableEnvironment">
<!--   -->
</a>
<h3>Methods inherited from interface&nbsp;com.icodici.universa.contract.services.<a href="../../../../../com/icodici/universa/contract/services/ImmutableEnvironment.html" title="interface in com.icodici.universa.contract.services">ImmutableEnvironment</a></h3>
<code><a href="../../../../../com/icodici/universa/contract/services/ImmutableEnvironment.html#get-java.lang.String-U-">get</a>, <a href="../../../../../com/icodici/universa/contract/services/ImmutableEnvironment.html#getContract--">getContract</a>, <a href="../../../../../com/icodici/universa/contract/services/ImmutableEnvironment.html#instanceCreatedAt--">instanceCreatedAt</a>, <a href="../../../../../com/icodici/universa/contract/services/ImmutableEnvironment.html#nameRecords--">nameRecords</a>, <a href="../../../../../com/icodici/universa/contract/services/ImmutableEnvironment.html#storageSubscriptions--">storageSubscriptions</a>, <a href="../../../../../com/icodici/universa/contract/services/ImmutableEnvironment.html#tryAllocate-java.util.Collection-java.util.Collection-java.util.Collection-">tryAllocate</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="set-java.lang.String-java.lang.Object-">
<!--   -->
</a><a name="set-java.lang.String-T-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>set</h4>
<pre>&lt;T&gt;&nbsp;T&nbsp;set(java.lang.String&nbsp;key,
          T&nbsp;value)</pre>
<div class="block">Writes a key to the KV store. See the logic description above.</div>
<dl>
<dt><span class="paramLabel">Type Parameters:</span></dt>
<dd><code>T</code> - </dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>key</code> - </dd>
<dd><code>value</code> - </dd>
<dt><span class="returnLabel">Returns:</span></dt>
</dl>
</li>
</ul>
<a name="rollback--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>rollback</h4>
<pre>void&nbsp;rollback()</pre>
<div class="block">Reset the KV store to the initial state</div>
</li>
</ul>
<a name="createStorageSubscription-com.icodici.universa.HashId-java.time.ZonedDateTime-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>createStorageSubscription</h4>
<pre>@Nullable <a href="../../../../../com/icodici/universa/contract/services/ContractStorageSubscription.html" title="interface in com.icodici.universa.contract.services">ContractStorageSubscription</a>&nbsp;createStorageSubscription(@NonNull <a href="../../../../../com/icodici/universa/HashId.html" title="class in com.icodici.universa">HashId</a>&nbsp;contractId,
                                                                @NonNull java.time.ZonedDateTime&nbsp;expiresAt)</pre>
<div class="block">Create subscription to the existing (stored) contract</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>contractId</code> - stored revision</dd>
<dd><code>expiresAt</code> - time to expiration</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>subscription or null if this contract is not known to the storage service</dd>
</dl>
</li>
</ul>
<a name="createStorageSubscription-byte:A-java.time.ZonedDateTime-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>createStorageSubscription</h4>
<pre>@NonNull <a href="../../../../../com/icodici/universa/contract/services/ContractStorageSubscription.html" title="interface in com.icodici.universa.contract.services">ContractStorageSubscription</a>&nbsp;createStorageSubscription(byte[]&nbsp;packedTransaction,
                                                               @NonNull java.time.ZonedDateTime&nbsp;expiresAt)</pre>
<div class="block">Create storage subscription to a packed contract. It always creates the subscription to new or existing contract.
 The storage must not create copies of the same contracts or update its storded binary representations. There
 should be always no one copy in the storage</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>packedTransaction</code> - </dd>
<dd><code>expiresAt</code> - </dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>susbscription.</dd>
</dl>
</li>
</ul>
<a name="createNameRecord-com.icodici.universa.contract.services.UnsName-java.time.ZonedDateTime-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>createNameRecord</h4>
<pre>@NonNull <a href="../../../../../com/icodici/universa/contract/services/NameRecord.html" title="interface in com.icodici.universa.contract.services">NameRecord</a>&nbsp;createNameRecord(@NonNull <a href="../../../../../com/icodici/universa/contract/services/UnsName.html" title="class in com.icodici.universa.contract.services">UnsName</a>&nbsp;unsName,
                                     @NonNull java.time.ZonedDateTime&nbsp;expiresAt)</pre>
</li>
</ul>
<a name="setSubscriptionExpiresAt-com.icodici.universa.contract.services.ContractStorageSubscription-java.time.ZonedDateTime-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setSubscriptionExpiresAt</h4>
<pre>void&nbsp;setSubscriptionExpiresAt(<a href="../../../../../com/icodici/universa/contract/services/ContractStorageSubscription.html" title="interface in com.icodici.universa.contract.services">ContractStorageSubscription</a>&nbsp;subscription,
                              java.time.ZonedDateTime&nbsp;expiresAt)</pre>
</li>
</ul>
<a name="destroySubscription-com.icodici.universa.contract.services.ContractStorageSubscription-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>destroySubscription</h4>
<pre>void&nbsp;destroySubscription(<a href="../../../../../com/icodici/universa/contract/services/ContractStorageSubscription.html" title="interface in com.icodici.universa.contract.services">ContractStorageSubscription</a>&nbsp;subscription)</pre>
</li>
</ul>
<a name="setNameRecordExpiresAt-com.icodici.universa.contract.services.NameRecord-java.time.ZonedDateTime-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setNameRecordExpiresAt</h4>
<pre>void&nbsp;setNameRecordExpiresAt(<a href="../../../../../com/icodici/universa/contract/services/NameRecord.html" title="interface in com.icodici.universa.contract.services">NameRecord</a>&nbsp;nameRecord,
                            java.time.ZonedDateTime&nbsp;expiresAt)</pre>
</li>
</ul>
<a name="destroyNameRecord-com.icodici.universa.contract.services.NameRecord-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>destroyNameRecord</h4>
<pre>void&nbsp;destroyNameRecord(<a href="../../../../../com/icodici/universa/contract/services/NameRecord.html" title="interface in com.icodici.universa.contract.services">NameRecord</a>&nbsp;nameRecord)</pre>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../com/icodici/universa/contract/services/ImmutableEnvironment.html" title="interface in com.icodici.universa.contract.services"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../../com/icodici/universa/contract/services/NameRecord.html" title="interface in com.icodici.universa.contract.services"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../index.html?com/icodici/universa/contract/services/MutableEnvironment.html" target="_top">Frames</a></li>
<li><a href="MutableEnvironment.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
